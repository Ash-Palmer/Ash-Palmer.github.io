<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="Fill Me In">
<meta name="author" content="John Doe">
<title>Preston: Local Weather Forecast.news</title>

<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

<!-- STYLE SHEETS -->
<link href="css/normalize.css" rel="stylesheet">
<link href="css/small.css" rel="stylesheet">
<link href="css/medium.css" rel="stylesheet">
<link href="css/large.css" rel="stylesheet">
</head>

<body>
<header class="clearfix">
    <img class="logo" src="images/weather-logo.png" alt="logo" 
    srcset="images/weather-logo1.png 1x, images/weather-logo2.png 2x,
    images/weather-logo3.png 3x">
    <div>
        <h1>Local Weather Forecast.news</h1>
        <h2>Idaho's #1 Weather Channel</h2>
    </div>
</header>

<!-- NAVIGATION HERE -->
<nav class="clearfix">
    <button onclick="toggleMenu()">&#9776;</button>
        <ul id="primaryNav" class="goaway">
            <li><a href="index.html">Home</a></li>
            <li class="active"><a href="preston.html">Preston</a></li>
            <li><a href="sodasprings.html">Soda Springs</a></li>
            <li><a href="fishhaven.html">Fish Haven</a></li> 
            <li><a href="stormcenter.html">Storm Center</a></li> 
            <li><a href="gallery.html">Gallery</a></li>   
        </ul>
</nav>

<!-- CONTENT HERE -->
<main class="clearfix">
    <h1>Preston</h1>
    <div class="herodiv">
        
            <img class="heroimg" src="images/hero-image-min.jpeg"sizes="100vw"
            srcset="images/hero-image400.jpg 400w,
                    images/hero-image800.jpg 800w,
                    images/hero-image1200.jpg 1200w">
        
        <section class="conditions">
                        <h3>Weather Summary</h3>
                            <p>Currently: <span id="current"></span></p>
                            <p>High: <span id="maxTemp">50</span>°F</p> 
                            <p>Wind Chill: <span id="output"></span>°F</p>
                            <p>Humidity: <span id="humidity">4</span>%</p>
                            <p>Wind Speed: <span id="wind speed">4</span>mph</p>
        </section>
    </div>   
            
<!-- Forecast Table HERE -->
    <div class="hide">
    <h2>5 Day Forecast</h2>
    <table> 
        <tr>
            <th><span id="day"></span></th>
            <th><span id="day"></span></th>
            <th><span id="day"></span></th>
            <th><span id="day"></span></th>
            <th><span id="day"></span></th>
        </tr>
        <tr>
            <td><img id="weather_icon" src="" alt="Current Weather"><span id="currentTemp">&deg;F</span></td>
            <td><img id="weather_icon" src="" alt="Current Weather"><span id="currentTemp">&deg;F</span></td>
            <td><img id="weather_icon" src="" alt="Current Weather"><span id="currentTemp">&deg;F</span></td>
            <td><img id="weather_icon" src="" alt="Current Weather"><span id="currentTemp">&deg;F</span></td>
            <td><img id="weather_icon" src="" alt="Current Weather"><span id="currentTemp">&deg;F</span></td>
        </tr>  
    </table>
    </div>
 
<div>
    <h2>This Day in History</h2>
    <figure class="sign">
        <img src="images/bear-river.JPG"  
        alt="Photo of Bear River Massacre Sign">
    </figure>
   
    <p>On this day in history 25 years ago, Allie Hansen of Preston, received 
        the Orchid Award from the Idaho State Historical Preservation Commission 
        for her work towards getting the Bear River Massacre site named a 
        National Historical Landmark. Hansen is president of the Bear River/
        Battle Creek Monument Association and chair of the massacre upgrade 
        project, and has been working over the past several years to obtain 
        national recognition for the conflict between the United States Cavalry 
        and Indian natives in 1863. Hansen has been instrumental in obtaining 
        the National Historical Landmark status by petitioning historians, state 
        and national officials, and other interested parties. 
    </p>
    </div>


    <section>
        
    </section>

   
    <div class="row">
            <section>
                <h3>Address:</h3>
                    <p>Local Weather Forecast.news</p>
                    <p>123 Main Street</p>
                    <p>Preston, ID 87382</p>
            </section>
        
            <section>
                <h3>Phone:</h3>
                    <p>(801) 555-1234</p>
                
                <h3>Email:</h3>
                    <p>localweatherforecast@lwf.news</p>
            </section>
        
        </div>

</main>

<footer id="outputdiv">
&copy; Ashley Stevens | <button onclick="displayDate()">Current Date</button> |  <a href="https://openweathermap.org">Open Weather Map</a>
</footer>

<script src="js/hamburger.js"></script>
<script src="js/currentdate.js"></script>
<script src="js/weatherapi2.js"></script>
<script src="js/windchill.js"></script>
<script src="js/forecast.js"></script>

<script>
    var section = document.querySelector("section");

    var requestURL = "https://byui-cit230.github.io/weather/data/towndata.json";
    var myRequestObject = new XMLHttpRequest();

    
    myRequestObject.open("GET", requestURL);
    myRequestObject.responseType = "json";
    myRequestObject.send();

    myRequestObject.onload = function() {
       var Tevents = myRequestObject.response;
        showTowns(Tevents);
    } 

    function showTowns(jsonObj) {
      let townEvents = jsonObj["towns"][1]["towns"][4]["towns"][5];
      console.log(townEvents);

      for(var i = 0; i < townEvents.length; i++) {
        var myArticle = document.createElement('article');
        var myH2 = document.createElement('h2');
        var myPara3 = document.createElement('p');
        var myList = document.createElement('ul');

        myH2.textContent = townEvents[i].name;
        myPara3.textContent = 'Town events:';

        var Events = townEvents[i].events;
        for(var j = 0; j < Events.length; j++) {
          var listItem = document.createElement('li');
          listItem.textContent = Events[j];
          myList.appendChild(listItem);
        }
        myArticle.appendChild(myH2);
        myArticle.appendChild(myPara3);
        myArticle.appendChild(myList);

        section.appendChild(myArticle);
      }
    }
    
</script>
</body>
</html>